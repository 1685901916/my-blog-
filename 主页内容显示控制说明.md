# 📊 主页内容显示控制说明

## 🎯 功能说明

我已经为你创建了一个**可视化配置页面**，可以查看当前主页显示设置。

## 🔗 访问地址

### 本地开发环境
```
http://localhost:4321/settings/
```

### 服务器地址
```
http://192.168.4.126:4321/settings/
```

## 📸 页面功能

设置页面会显示：

- ✅ **博客文章** 开关状态
- ✅ **漫画内容** 开关状态  
- ✅ **作品集** 开关状态

每个模块都会显示：
- 📌 模块名称和描述
- 🔘 当前状态（已开启/已关闭）
- 📁 对应的内容目录

## 🔧 如何修改设置

### 方法1：通过配置文件（推荐）

打开 `src/config.ts` 文件，找到第 50-54 行：

```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 博客文章 - 设为 false 则主页不显示博客
    showMangaPosts: true,     // ✅ 漫画内容 - 设为 true 则主页显示漫画
    showPortfolioPosts: true, // ✅ 作品集   - 设为 true 则主页显示作品集
},
```

**修改步骤：**
1. 打开 `src/config.ts`
2. 找到 `homepageContent` 配置
3. 修改对应的值为 `true` 或 `false`
4. 保存文件
5. 等待 5 秒（Astro 自动重新编译）
6. 刷新浏览器（Ctrl+Shift+R）

### 方法2：使用快速配置脚本

我已经为你创建了快速配置脚本：

#### Windows 批处理脚本
双击运行 `检查配置状态.bat`，可以：
- 查看当前配置状态
- 快速修改配置

### 方法3：通过批处理命令

```batch
# 打开博客开关
echo showBlogPosts: true

# 打开漫画开关
echo showMangaPosts: true

# 打开作品集开关
echo showPortfolioPosts: true
```

## 📝 配置示例

### 示例1：只显示博客文章
```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 显示
    showMangaPosts: false,    // ❌ 不显示
    showPortfolioPosts: false, // ❌ 不显示
},
```

### 示例2：显示所有内容
```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 显示
    showMangaPosts: true,     // ✅ 显示
    showPortfolioPosts: true, // ✅ 显示
},
```

### 示例3：只显示漫画和作品集
```typescript
homepageContent: {
    showBlogPosts: false,     // ❌ 不显示
    showMangaPosts: true,     // ✅ 显示
    showPortfolioPosts: true, // ✅ 显示
},
```

## 🔍 如何检查配置是否生效

### 1. 查看终端输出
终端会显示加载的内容类型：
```
[content] Syncing content
Posts collection: 10 entries
Manga collection: 5 entries
Portfolio collection: 3 entries
```

### 2. 访问设置页面
打开 `http://localhost:4321/settings/` 查看当前状态

### 3. 查看主页
打开 `http://localhost:4321/` 查看实际显示的内容

## 🚨 常见问题

### Q1: 修改配置后没有生效？
**解决方法：**
1. 等待 5-10 秒让 Astro 重新编译
2. 清除浏览器缓存（Ctrl+Shift+R）
3. 检查终端是否有错误信息
4. 重启开发服务器

### Q2: 作品集不显示？
**可能原因：**
1. 作品集文件的 frontmatter 格式错误
2. `showPortfolioPosts` 设置为 `false`
3. 作品集文件被标记为 `draft: true`

**解决方法：**
```bash
# 检查作品集文件
cd src/content/portfolio
# 查看文件列表
ls -R
```

### Q3: 主页排序不正确？
**说明：**
主页内容按照以下规则排序：
1. 置顶文章（`pinned: true`）优先显示
2. 其他文章按 `published` 日期倒序（最新在前）

### Q4: 服务器部署后配置不生效？
**解决方法：**
1. 确保服务器上的代码是最新的
2. 重新构建项目：`npm run build`
3. 清理缓存：`rm -rf .astro`
4. 重新部署

## 📌 部署到服务器后的配置流程

### 流程图
```
本地修改配置 
    ↓
提交到 Git
    ↓
推送到远程仓库
    ↓
服务器拉取代码
    ↓
重新构建项目
    ↓
部署到网站目录
```

### 详细步骤

1. **本地修改配置**
```bash
# 打开配置文件
code src/config.ts

# 修改 homepageContent 配置
```

2. **提交并推送**
```bash
git add src/config.ts
git commit -m "更新主页显示配置"
git push
```

3. **服务器更新**（如果配置了自动部署）
```bash
# 自动触发构建和部署
```

或者（手动部署）
```bash
# SSH 到服务器
ssh username@your-server-ip

# 进入项目目录
cd /path/to/your/blog

# 拉取最新代码
git pull

# 重新构建
npm run build

# 部署
cp -r dist/* /var/www/html/blog/
```

## 🎨 自定义设置页面

如果你想修改设置页面的样式，编辑 `src/pages/settings.astro` 文件。

## 📂 相关文件

- `src/config.ts` - 主配置文件
- `src/types/config.ts` - 类型定义
- `src/utils/content-utils.ts` - 内容获取逻辑
- `src/pages/settings.astro` - 设置页面
- `检查配置状态.bat` - 快速检查脚本

## 💡 提示

- 修改配置文件后记得保存
- 等待 Astro 自动重新编译（约 5 秒）
- 使用 Ctrl+Shift+R 强制刷新浏览器
- 定期查看终端日志确认无错误

---

**如有问题，请查看：**
- 终端日志
- 浏览器控制台
- `src/config.ts` 文件语法

