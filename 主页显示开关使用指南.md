# 📚 主页内容显示开关使用指南

## 🎯 功能说明

这个开关可以控制主页（http://localhost:4321/）显示哪些类型的内容。

- ✅ **不影响专题页面**：/manga/、/portfolio/ 等专题页面始终显示完整内容
- ✅ **实时生效**：修改配置后，刷新浏览器即可看到效果
- ✅ **灵活控制**：可以根据需要自由组合显示内容

---

## 📍 配置位置

**文件路径**：`src/config.ts`

**行号**：第 50-54 行

```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 博客文章
    showMangaPosts: false,    // ❌ 漫画内容
    showPortfolioPosts: true, // ✅ 作品集
},
```

---

## 🔧 如何修改

### 方法一：直接编辑配置文件

1. 打开文件：`src/config.ts`
2. 找到第 50-54 行的 `homepageContent` 配置
3. 修改 `true`/`false` 值：
   - `true` = 在主页显示该类型内容
   - `false` = 在主页隐藏该类型内容
4. 保存文件（`Ctrl+S`）
5. 等待 3-5 秒让 Astro 重新编译
6. 刷新浏览器（`Ctrl+Shift+R` 强制刷新）

### 方法二：使用检查工具

运行项目根目录下的 `检查配置状态.bat` 脚本，可以快速查看当前配置状态。

---

## 📖 配置项详细说明

### 1. `showBlogPosts` - 博客文章

**默认值**：`true`（显示）

**说明**：控制是否在主页显示 `src/content/posts/` 目录下的博客文章。

**建议**：
- ✅ **保持开启** - 博客是网站的核心内容
- 适合：技术文章、生活记录、教程分享

**示例**：
```typescript
showBlogPosts: true,  // 主页显示博客文章
showBlogPosts: false, // 主页不显示博客文章（通常不建议）
```

---

### 2. `showMangaPosts` - 漫画内容

**默认值**：`false`（不显示）

**说明**：控制是否在主页显示 `src/content/manga/` 目录下的漫画文章。

**建议**：
- ❌ **建议关闭** - 漫画内容数量通常很多，会占据主页大量空间
- ✅ **访问专题页** - 漫画内容建议通过 `/manga/` 页面访问

**示例**：
```typescript
showMangaPosts: false, // 主页不显示漫画（推荐）
showMangaPosts: true,  // 主页显示漫画（内容多时会很拥挤）
```

---

### 3. `showPortfolioPosts` - 作品集

**默认值**：`true`（显示）

**说明**：控制是否在主页显示 `src/content/portfolio/` 目录下的作品集内容。

**建议**：
- ✅ **建议开启** - 作品集是展示个人能力的重要内容
- 适合：个人项目、程序作品、设计作品、插画等

**作品集分类**：
- **程序系**：`src/content/portfolio/programming/` - 编程相关作品
- **正常系**：`src/content/portfolio/normal/` - 插画、设计等作品

**示例**：
```typescript
showPortfolioPosts: true,  // 主页显示作品集（推荐）
showPortfolioPosts: false, // 主页不显示作品集
```

---

## 💡 常用配置组合

### 配置方案 A：技术博客（推荐）
```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 显示博客
    showMangaPosts: false,    // ❌ 不显示漫画
    showPortfolioPosts: true, // ✅ 显示作品集
},
```
**适用场景**：
- 技术博主
- 程序员个人网站
- 展示个人项目和技术文章

---

### 配置方案 B：纯博客模式
```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 显示博客
    showMangaPosts: false,    // ❌ 不显示漫画
    showPortfolioPosts: false, // ❌ 不显示作品集
},
```
**适用场景**：
- 专注写作的博客
- 生活记录博客
- 简洁风格网站

---

### 配置方案 C：全内容展示
```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 显示博客
    showMangaPosts: true,     // ✅ 显示漫画
    showPortfolioPosts: true, // ✅ 显示作品集
},
```
**适用场景**：
- 综合型个人网站
- 内容较少时

**⚠️ 注意**：
- 漫画内容较多时，主页会非常长，滚动体验较差
- 建议配合分页功能使用

---

### 配置方案 D：二次元爱好者
```typescript
homepageContent: {
    showBlogPosts: true,      // ✅ 显示博客
    showMangaPosts: true,     // ✅ 显示漫画
    showPortfolioPosts: false, // ❌ 不显示作品集
},
```
**适用场景**：
- 二次元内容为主的博客
- 动漫评论网站
- 漫画推荐站点

---

## 🔍 如何验证配置是否生效

### 1. 检查文件保存
确保 `src/config.ts` 文件已保存（编辑器标签页没有未保存标记）。

### 2. 检查终端输出
查看开发服务器终端，应该看到类似输出：
```
[astro] content updated src/config.ts
```

### 3. 刷新浏览器
按 `Ctrl+Shift+R`（Windows）或 `Cmd+Shift+R`（Mac）强制刷新。

### 4. 检查主页内容
- **开启博客**：应该看到 "Example Post 1"、"Example Post 2" 等文章
- **开启作品集**：应该看到 "个人博客系统"、"下载已购小鹅通视频"、"示例插画作品" 等
- **开启漫画**：应该看到漫画文件夹和文章

---

## ❓ 常见问题

### Q1: 修改配置后没有生效？
**解决方法**：
1. 确认文件已保存
2. 等待 5-10 秒让 Astro 重新编译
3. 清除浏览器缓存并强制刷新（`Ctrl+Shift+R`）
4. 如果还不行，重启开发服务器：
   ```bash
   # 终止服务器（Ctrl+C）
   # 清除缓存并重启
   rmdir /s /q .astro
   npm run dev
   ```

### Q2: 为什么专题页面不受影响？
**回答**：
- 这个开关**只控制主页**的内容显示
- `/manga/` 页面始终显示所有漫画
- `/portfolio/` 页面始终显示所有作品集
- 这样设计是为了让主页更简洁，同时不影响专题页面的完整性

### Q3: 可以让不同分类显示在不同位置吗？
**回答**：
- 目前所有启用的内容会按**发布日期**混合排序
- 置顶文章（`pinned: true`）始终在最前面
- 如需更复杂的布局，需要修改 `src/pages/[...page].astro` 页面

### Q4: 如何添加新的作品集文章？
**步骤**：
1. 在 `src/content/portfolio/programming/` （程序系）或 `src/content/portfolio/normal/` （正常系）创建 `.md` 文件
2. 添加 frontmatter：
   ```yaml
   ---
   title: 我的新作品
   published: 2025-11-02
   description: 这是作品描述
   image: ""
   tags: ["程序系", "Python"]  # 或 ["正常系", "插画"]
   category: 作品集
   draft: false
   ---
   ```
3. 编写文章内容
4. 保存后刷新浏览器即可看到

### Q5: 日期格式是什么？
**正确格式**：
```yaml
published: 2025-11-02  # ✅ 正确：YYYY-MM-DD
published: 2025-01-01  # ✅ 正确
```

**错误格式**：
```yaml
published: 2025-01-01T00:00:00.000Z  # ❌ 错误：不需要时间和时区
published: "2025-01-01"              # ❌ 错误：不要加引号
published: 2025/01/01                # ❌ 错误：使用连字符而非斜杠
```

---

## 🛠️ 技术原理

### 工作流程
1. **配置读取**：`src/config.ts` 中的 `homepageContent` 配置被导出
2. **内容过滤**：`src/utils/content-utils.ts` 的 `getRawSortedPosts()` 函数根据配置决定是否获取对应集合
3. **页面渲染**：`src/pages/[...page].astro` 使用过滤后的内容渲染主页
4. **实时更新**：Astro 的 HMR（热模块替换）功能自动检测配置变化并重新编译

### 相关文件
- `src/config.ts` - 配置文件
- `src/types/config.ts` - TypeScript 类型定义
- `src/utils/content-utils.ts` - 内容获取逻辑
- `src/pages/[...page].astro` - 主页渲染
- `src/content/config.ts` - 内容集合 Schema 定义

---

## 📞 获取帮助

如果遇到问题：
1. 运行 `检查配置状态.bat` 查看当前配置
2. 检查终端是否有错误信息
3. 查看浏览器控制台（F12）是否有错误
4. 参考 [Mizuki 官方文档](https://docs.mizuki.mysqil.com/)

---

**最后更新**：2025-11-02  
**版本**：v1.0




